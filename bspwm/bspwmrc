#!/bin/bash

# Terminate already running instances
pkill -x sxhkd
pkill -x polybar
pkill -x picom
pkill -x dunst

# Wait for processes to terminate
sleep 1

# Start sxhkd (hotkey daemon)
sxhkd &

# Start compositor for transparency/effects
picom &

# Start notification daemon
dunst &

# Start status bar
polybar main &

# Set wallpaper (you'll need to add your wallpaper path)
feh --bg-scale ~/Pictures/wallpapers/wp4786592-retrowawe-wallpapers.jpg # feh --bg-scale ~/Pictures/wallpaper.jpg &

# Configure monitors
bspc monitor -d I II III IV V VI VII VIII IX X

# Window management
bspc config border_width         2
bspc config window_gap          12
bspc config split_ratio          0.52
bspc config borderless_monocle   true
bspc config gapless_monocle      true

# Colors (red-purple-blue theme inspired by the dotfiles)
bspc config focused_border_color        "#c678dd"
bspc config normal_border_color         "#44475a"
bspc config active_border_color         "#bd93f9"
bspc config presel_feedback_color       "#6272a4"

# Mouse
bspc config pointer_modifier mod4
bspc config pointer_action1 move
bspc config pointer_action2 resize_side
bspc config pointer_action3 resize_corner
bspc config click_to_focus any

# Rules
bspc rule -a Gimp desktop='^8' state=floating follow=on
bspc rule -a Chromium desktop='^2'
bspc rule -a Firefox desktop='^2'
bspc rule -a discord desktop='^3'
bspc rule -a Spotify desktop='^4'
xsetroot -cursor_name left_ptr &
gsettings set org.gnome.desktop.interface cursor-theme 'Bibata-Modern-Classic' &
bspc rule -a Code desktop=^2
bspc rule -a code desktop=^2
bspc rule -a Firefox desktop=^3
bspc rule -a firefox desktop=^3
